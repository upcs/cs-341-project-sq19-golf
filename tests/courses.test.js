import React from 'react';
import Path  from 'path';
import { shallow } from 'enzyme';

import Courses from '../src/server/courses.js';
const Fs = require('fs');

describe('Courses', () => {
  test('Should parse correctly from test file', () => {
    /*courses_test.csv is a static test file with the following contents:
        test1,number1,title1,professor1,start1,end1,days1
        test2,number2,title2,professor2,start2,end2,days2
        test3,number3,title3,professor3,start3,end3,days3*/

    let dataPath = Path.join('tests', 'courses_test.csv');
    var testCourses = Courses.parseCourseData(dataPath);

    //The parsing script calls toUpper() on the title and day fields
    expect(testCourses[0].subject).toBe("AS");
    expect(testCourses[0].days).toBe("M");
	expect(testCourses[2].days).toBe("T");
    expect(testCourses[3].days).toBe("W");
	expect(testCourses[4].days).toBe("R");
    expect(testCourses[5].days).toBe("F");

    //But not on the start field
	expect(testCourses[1].start).toBe("18:30 pm");
	expect(testCourses[1].end).toBe("19:30 pm");
	expect(testCourses[0].end).toBe("12:30 pm");
	
	expect(testCourses[2].mask).toEqual(["000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", "001100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"]);
	expect(testCourses[5].mask).toEqual(["000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", "000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000011"]);

	expect(testCourses[2].ones).toEqual([0, 2, 0, 0, 0]);
	expect(testCourses[5].ones).toEqual([0, 0, 0, 0, 2]);
  });
});
